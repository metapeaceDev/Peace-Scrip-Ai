# ComfyUI Service - Environment Variables

# Server
NODE_ENV=development
PORT=8000

# CORS
CORS_ORIGIN=http://localhost:5173,https://peace-script-ai.web.app

# Redis (for queue)
REDIS_URL=
# OR
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Queue Configuration
QUEUE_CONCURRENCY=3

# ComfyUI Workers (comma-separated URLs)
COMFYUI_WORKERS=http://localhost:8188

# Cloud Workers (RunPod)
RUNPOD_API_KEY=
RUNPOD_SERVERLESS_ENDPOINT_ID=
RUNPOD_DOCKER_IMAGE=runpod/pytorch:2.1.0-py3.10-cuda11.8.0-devel
RUNPOD_GPU_TYPE=NVIDIA RTX 3090

# Cloud Configuration
CLOUD_PREFER_SERVERLESS=true
CLOUD_MAX_PODS=5
CLOUD_IDLE_TIMEOUT=300000
CLOUD_AUTOSCALE_THRESHOLD=5

# Firebase Admin (Method 1: Service Account File)
FIREBASE_SERVICE_ACCOUNT_PATH=./service-account.json
FIREBASE_STORAGE_BUCKET=peace-script-ai.appspot.com

# Storage URL behavior:
# - signed: Signed URL (expires) (works even when bucket is private / UBLA enabled)
# - public: Permanent public URL via object ACLs (may fail when UBLA is enabled)
# - token: Permanent Firebase download token URL (recommended for "public link, no expiry")
FIREBASE_STORAGE_URL_MODE=token

# Back-compat toggle (only used when FIREBASE_STORAGE_URL_MODE is not set)
FIREBASE_STORAGE_MAKE_PUBLIC=false

# Signed URL TTL (hours). Default 168 (= 7 days)
FIREBASE_SIGNED_URL_TTL_HOURS=168

# Validate bucket existence before upload (recommended). Set to false to skip.
FIREBASE_STORAGE_VALIDATE_BUCKET=true

# Firebase Admin (Method 2: Environment Variables)
# FIREBASE_PROJECT_ID=peace-script-ai
# FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@peace-script-ai.iam.gserviceaccount.com
# FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
# FIREBASE_STORAGE_BUCKET=peace-script-ai.appspot.com

# LoRA Models (required)
REQUIRED_LORA_MODELS=Character-Consistency.safetensors,Cinematic.safetensors

# InfiniteTalk (Lip-sync / Talking Video)
# Required: base URL of your InfiniteTalk adapter/service (no trailing slash recommended)
# Example: http://127.0.0.1:9009
INFINITETALK_URL=

# Optional: path on the InfiniteTalk service that accepts multipart {video,audio}
# Default: /api/dub
INFINITETALK_DUB_PATH=/api/dub

# Optional: request timeout (ms)
# Default: 900000 (15 minutes)
INFINITETALK_TIMEOUT_MS=900000
