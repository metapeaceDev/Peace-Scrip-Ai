# üîß ComfyUI Troubleshooting Guide

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏ô‡∏£‡∏π‡∏õ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà 10% ‡πÑ‡∏°‡πà‡πÑ‡∏õ‡πÑ‡∏´‡∏ô

### ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏´‡∏•‡∏±‡∏Å

ComfyUI Backend Service (port 8000) ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö

### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

#### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Backend Service

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ port 8000 ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
nc -zv localhost 8000

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ ComfyUI Backend Service ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
curl http://localhost:8000/health/detailed
```

#### 2. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ComfyUI Backend Service

```bash
# ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå comfyui-service
cd comfyui-service

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
npm install

# ‡πÄ‡∏£‡∏¥‡πà‡∏° Backend Service
npm start
```

#### 3. ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ComfyUI Backend

‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ComfyUI Backend (‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤) ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢:

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env`**

```bash
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå .env
nano .env
```

‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

```env
# ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ComfyUI Backend
VITE_USE_COMFYUI_BACKEND=false
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå `.env.local`** (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

```bash
rm .env.local
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡πÅ‡∏≠‡∏õ:

```bash
npm run dev
```

## ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß

### 1. ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Timeout Protection

- **Backend Request Timeout**: 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **Poll Request Timeout**: 8 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **Health Check Timeout**: 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **Overall Job Timeout**: 5 ‡∏ô‡∏≤‡∏ó‡∏µ

### 2. ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Fallback Logic

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á Backend ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏∞ fallback ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ:

1. **Gemini 2.5 Flash Image** (‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á, quota ‡∏à‡∏≥‡∏Å‡∏±‡∏î)
2. **Gemini 2.0 Flash Exp** (‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ, quota ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤)
3. **Pollinations.ai** (‡∏ü‡∏£‡∏µ, ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î, ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Face ID)

### 3. ‚úÖ Error Messages ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

- ‡πÅ‡∏™‡∏î‡∏á error message ‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢
- ‡∏ö‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ tier

### 4. ‚úÖ Retry Mechanism

- Retry ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö connection timeout
- Retry polling ‡∏´‡∏≤‡∏Å backend ‡∏ï‡∏≠‡∏ö‡∏ä‡πâ‡∏≤
- Skip gracefully ‡∏´‡∏≤‡∏Å backend ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ (Development)

1. **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ ComfyUI Backend**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `VITE_USE_COMFYUI_BACKEND=false` ‡πÉ‡∏ô `.env`
2. **‡πÉ‡∏ä‡πâ Gemini API**: ‡∏ü‡∏£‡∏µ, ‡πÄ‡∏£‡πá‡∏ß, ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ (‡∏°‡∏µ quota limit)

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production (‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)

1. **‡πÉ‡∏ä‡πâ ComfyUI Backend**: ‡πÄ‡∏õ‡∏¥‡∏î Backend Service ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
2. **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á LoRA Models**: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Character Consistency
3. **‡πÉ‡∏ä‡πâ Docker**: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö scalability

```bash
# ‡πÄ‡∏£‡∏¥‡πà‡∏° ComfyUI Backend + Workers ‡∏î‡πâ‡∏ß‡∏¢ Docker
cd comfyui-service
docker-compose up -d

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
docker-compose ps
docker-compose logs -f
```

## FAQ

### Q: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ ComfyUI Backend?

**A:** ComfyUI Backend ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏û‡∏£‡∏≤‡∏∞:

- ‡πÉ‡∏ä‡πâ SDXL/FLUX models ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö LoRA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Character Consistency
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Face ID matching ‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤
- ‡πÑ‡∏°‡πà‡∏°‡∏µ quota limit (unlimited)

### Q: Gemini API ‡∏Å‡∏±‡∏ö ComfyUI ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

**A:**
| Feature | Gemini API | ComfyUI Backend |
|---------|-----------|-----------------|
| ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß | ‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å (5-10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (20-40 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) |
| ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û | ‡∏î‡∏µ‡∏°‡∏≤‡∏Å | ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° |
| Face ID | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö (‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤) |
| Quota | ‡∏à‡∏≥‡∏Å‡∏±‡∏î (15 req/min) | ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î |
| ‡∏£‡∏≤‡∏Ñ‡∏≤ | ‡∏ü‡∏£‡∏µ | ‡∏ü‡∏£‡∏µ (‡πÉ‡∏ä‡πâ local) |

### Q: ‡∏ñ‡πâ‡∏≤ Gemini quota ‡∏´‡∏°‡∏î ‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

**A:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ fallback ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ Pollinations.ai (‡πÅ‡∏ï‡πà‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Face ID)

### Q: ‡∏à‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ ComfyUI Backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

**A:** ‡πÄ‡∏õ‡∏¥‡∏î Developer Console (F12) ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏π‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö Console ‡∏à‡∏∞‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:

- ‚úÖ "Backend is healthy" = ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- ‚ùå "Backend not running" = ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ô

## ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°

‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:

1. Console log (F12)
2. Network tab (‡∏î‡∏π request ‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß)
3. Backend logs (`comfyui-service/logs`)

---

**‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î**: 2 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2568  
**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô**: 1.0.0
