# ЁЯУК Psychology Evolution System - Implementation Report

**р╕зр╕▒р╕Щр╕Чр╕╡р╣И**: 5 р╕Шр╕▒р╕Щр╕зр╕▓р╕Др╕б 2568
**р╕кр╕Цр╕▓р╕Щр╕░**: тЬЕ р╕Юр╕▒р╕Тр╕Щр╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М

---

## ЁЯОп р╕зр╕▒р╕Хр╕Цр╕╕р╕Ыр╕гр╕░р╕кр╕Зр╕Др╣М

р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ър╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╣Бр╕ер╕░р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕▓р╕Зр╕Ир╕┤р╕Хр╣Гр╕Ир╕Вр╕нр╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Хр╕ер╕нр╕Фр╣Ар╕гр╕╖р╣Ир╕нр╕З р╣Вр╕Фр╕в:

1. **р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И** р╣Гр╕Щр╣Бр╕Хр╣Ир╕ер╕░р╕Йр╕▓р╕Б
2. **р╕Ир╕│р╣Бр╕Щр╕Бр╕Бр╕гр╕гр╕б** р╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Юр╕╕р╕Чр╕Шр╕ир╕▓р╕кр╕Щр╕▓ (р╕Бр╕╕р╕ир╕е/р╕нр╕Бр╕╕р╕ир╕е)
3. **р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Psychology** р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б
4. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З** р╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б
5. **р╣Бр╕кр╕Фр╕Зр╕Ьр╕е Timeline** р╕Чр╕╡р╣Ир╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Зр╣Ир╕▓р╕в

---

## тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕кр╕гр╣Зр╕И

### 1. **Core System Files**

#### `/src/services/psychologyEvolution.ts` (480 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф)

**р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И**: Engine р╕лр╕ер╕▒р╕Бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З

**Functions**:

- тЬЕ `analyzeSceneActions()` - р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И р╕Ир╕▓р╕Б scene
- тЬЕ `classifyKarma()` - р╕Ир╕│р╣Бр╕Щр╕Бр╕зр╣Ир╕▓р╣Ар╕Ыр╣Зр╕Щр╕Бр╕╕р╕ир╕е/р╕нр╕Бр╕╕р╕ир╕е/р╣Ар╕Йр╕вр╣Ж
- тЬЕ `calculatePsychologyChanges()` - р╕Др╕│р╕Щр╕зр╕Ур╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З consciousness/defilement
- тЬЕ `applyPsychologyChanges()` - р╣Гр╕Кр╣Йр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Бр╕▒р╕Ър╕Хр╕▒р╕зр╕ер╕░р╕Др╕г (immutable)
- тЬЕ `createPsychologySnapshot()` - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕кр╕ар╕▓р╕Юр╕Ир╕┤р╕Хр╣Гр╕И р╕У р╣Ар╕зр╕ер╕▓р╕Щр╕▒р╣Йр╕Щ
- тЬЕ `updatePsychologyTimeline()` - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х timeline р╕лр╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б
- тЬЕ `validateCharacterArc()` - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕кр╕бр╣Ар╕лр╕Хр╕╕р╕кр╕бр╕Ьр╕ер╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б

**Buddhist Logic Implemented**:

```typescript
// р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б тЖТ р╣Ар╕Юр╕┤р╣Ир╕б consciousness, р╕ер╕Ф defilement
if (karmaType === 'р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б') {
  consciousnessChanges['Mindfulness'] = +2;
  consciousnessChanges['Wisdom'] = +1;
  defilementChanges[strongestDefilement] = -2;
}

// р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б тЖТ р╣Ар╕Юр╕┤р╣Ир╕б defilement, р╕ер╕Ф consciousness
else if (karmaType === 'р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б') {
  defilementChanges['Anger'] = +2; // р╕Хр╕▓р╕бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│
  consciousnessChanges['Mindfulness'] = -2;
  consciousnessChanges['Wisdom'] = -1;
}
```

#### `/src/services/psychologyIntegration.ts` (143 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф)

**р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И**: Integration layer р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Бр╕▒р╕Ъ scene generation workflow

**Functions**:

- тЬЕ `initializeProjectPsychology()` - р╕кр╕гр╣Йр╕▓р╕З timeline р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
- тЬЕ `updatePsychologyAfterScene()` - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б
- тЬЕ `validateProjectPsychology()` - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Чр╕╕р╕Бр╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╣Гр╕Щр╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г
- тЬЕ `getPsychologySummary()` - р╕кр╕гр╕╕р╕Ыр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

**Auto-Update Workflow**:

```typescript
// р╕лр╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б
const scene = await generateScene(...);

// р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х psychology р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
scriptData = updatePsychologyAfterScene(scriptData, scene, plotPoint);
// тЖТ р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И
// тЖТ р╕Ир╕│р╣Бр╕Щр╕Бр╕Бр╕гр╕гр╕б
// тЖТ р╕Др╕│р╕Щр╕зр╕Ур╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
// тЖТ р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Др╣Ир╕▓ consciousness/defilement
// тЖТ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б snapshot
```

### 2. **UI Components**

#### `/src/components/PsychologyTimeline.tsx` (300+ р╕Ър╕гр╕гр╕Чр╕▒р╕Ф)

**р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И**: р╣Бр╕кр╕Фр╕Зр╕Бр╕гр╕▓р╕Яр╣Бр╕ер╕░р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З

**Features**:

- тЬЕ **р╕Бр╕гр╕▓р╕Я Mental Balance** - р╣Бр╕Бр╕Щ X: р╕Йр╕▓р╕Б, р╣Бр╕Бр╕Щ Y: -100 р╕Цр╕╢р╕З +100
- тЬЕ **Overall Arc Summary** - р╕Чр╕┤р╕ир╕Чр╕▓р╕Зр╣Бр╕ер╕░р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б
- тЬЕ **Scene-by-Scene Analysis** - р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Бр╕Хр╣Ир╕ер╕░р╕Йр╕▓р╕Б
- тЬЕ **р╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И Display** - р╣Бр╕кр╕Фр╕Зр╣Бр╕вр╕Бр╣Ар╕Ыр╣Зр╕Щ 3 columns
- тЬЕ **Karma Type Badges** - р╕кр╕╡р╣Бр╕Фр╕З(р╕нр╕Бр╕╕р╕ир╕е)/р╣Ар╕Вр╕╡р╕вр╕з(р╕Бр╕╕р╕ир╕е)/р╣Ар╕Чр╕▓(р╣Ар╕Йр╕вр╣Ж)
- тЬЕ **Interactive Chart** - р╕Др╕ер╕┤р╕Б data point р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
- тЬЕ **Scrollable Layout** - р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓р╕вр╕▓р╕з
- тЬЕ **Responsive Design** - р╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕▒р╣Йр╕З desktop/mobile

**Visual Elements**:

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ ЁЯУИ Psychology Timeline                  тФВ тЬХ р╕Ыр╕┤р╕Ф
тФВ р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕▓р╕Зр╕Ир╕┤р╕Хр╣Гр╕Ир╕Вр╕нр╕З р╕Юр╕гр╕░р╕нр╕гр╕╕р╕У       тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ Character Arc: р╕Бр╕╕р╕ир╕ер╕Вр╕╢р╣Йр╕Щ ЁЯУИ              тФВ
тФВ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З: +25.3 р╕Др╕░р╣Бр╕Щр╕Щ               тФВ
тФВ                                         тФВ
тФВ [Mental Balance Chart - SVG Line Graph]тФВ
тФВ                                         тФВ
тФВ Scene 1: р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ                      тФВ
тФВ тЬи р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б                            тФВ
тФВ р╕Бр╕▓р╕в: р╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕нр╕Ьр╕╣р╣Йр╕нр╕╖р╣Ир╕Щ                  тФВ
тФВ р╕зр╕▓р╕Ир╕▓: "р╕Ьр╕бр╕Ир╕░р╕Кр╣Ир╕зр╕вр╕Др╕╕р╕У"                   тФВ
тФВ р╣Гр╕И: ЁЯТн р╕Ьр╕бр╕Хр╣Йр╕нр╕Зр╕Чр╕│р╕Др╕зр╕▓р╕бр╕Фр╕╡                 тФВ
тФВ                                         тФВ
тФВ ...                                     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

### 3. **Data Types**

#### `/types.ts` - р╣Ар╕Юр╕┤р╣Ир╕б interfaces р╣Гр╕лр╕бр╣И

```typescript
// р╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И Analysis
interface ActionAnalysis {
  р╕Бр╕▓р╕в: string[]; // Physical actions
  р╕зр╕▓р╕Ир╕▓: string[]; // Speech patterns
  р╣Гр╕И: string[]; // Mental states
}

// р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Гр╕Щр╣Бр╕Хр╣Ир╕ер╕░р╕Йр╕▓р╕Б
interface PsychologyChange {
  sceneNumber: number;
  plotPoint: string;
  actions: ActionAnalysis;
  consciousnessChanges: Record<string, number>;
  defilementChanges: Record<string, number>;
  reasoning: string;
  karmaType: 'р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б' | 'р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б' | 'р╣Ар╕Йр╕вр╣Ж';
}

// р╕кр╕ар╕▓р╕Юр╕Ир╕┤р╕Хр╣Гр╕И р╕У р╣Ар╕зр╕ер╕▓р╕Щр╕▒р╣Йр╕Щ
interface PsychologySnapshot {
  sceneNumber: number;
  plotPoint: string;
  consciousness: Record<string, number>;
  defilement: Record<string, number>;
  mentalBalance: number;
  dominantEmotion: string;
}

// Timeline р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕г
interface CharacterPsychologyTimeline {
  characterId: string;
  characterName: string;
  snapshots: PsychologySnapshot[];
  changes: PsychologyChange[];
  overallArc: {
    startingBalance: number;
    endingBalance: number;
    totalChange: number;
    direction: 'р╕Бр╕╕р╕ир╕ер╕Вр╕╢р╣Йр╕Щ' | 'р╕Бр╕╕р╕ир╕ер╕ер╕З' | 'р╕Др╕Зр╕Чр╕╡р╣И';
    interpretation: string;
  };
}

// р╣Ар╕Юр╕┤р╣Ир╕бр╣Гр╕Щ ScriptData
interface ScriptData {
  // ... existing fields
  psychologyTimelines?: Record<string, CharacterPsychologyTimeline>;
}
```

### 4. **Documentation**

#### `/PSYCHOLOGY_EVOLUTION.md` (500+ р╕Ър╕гр╕гр╕Чр╕▒р╕Ф)

**р╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓**:

- тЬЕ Overview р╣Бр╕ер╕░ Features
- тЬЕ File Structure
- тЬЕ Core Functions р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
- тЬЕ Data Structure р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- тЬЕ Integration Workflow
- тЬЕ Buddhist Principles Validation
- тЬЕ Example Output
- тЬЕ UI Components
- тЬЕ Performance Considerations
- тЬЕ Future Enhancements

---

## ЁЯФм р╕лр╕ер╕▒р╕Бр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

### р╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И

```typescript
// р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Ир╕▓р╕Б scene.sceneDesign.situations
situations.forEach(situation => {
  // р╕Бр╕▓р╕в - р╕Ир╕▓р╕Б description
  if (situation.description.includes(characterName)) {
    р╕Бр╕▓р╕в.push(situation.description);
  }

  // р╕зр╕▓р╕Ир╕▓ - р╕Ир╕▓р╕Б dialogue
  situation.dialogue.filter(d => d.character === characterName).forEach(d => р╕зр╕▓р╕Ир╕▓.push(d.dialogue));

  // р╣Гр╕И - р╕Ир╕▓р╕Б characterThoughts
  if (situation.characterThoughts.includes(characterName)) {
    р╣Гр╕И.push(situation.characterThoughts);
  }
});
```

### р╕Бр╕▓р╕гр╕Ир╕│р╣Бр╕Щр╕Бр╕Бр╕гр╕гр╕б

```typescript
// р╕Др╣Йр╕Щр╕лр╕▓ keywords р╣Гр╕Щр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
const text = [...р╕Бр╕▓р╕в, ...р╕зр╕▓р╕Ир╕▓, ...р╣Гр╕И].join(' ');

// р╕Бр╕╕р╕ир╕е keywords
const wholesome = ['р╕Кр╣Ир╕зр╕в', 'р╣Гр╕лр╣Й', 'р╣Ар╕бр╕Хр╕Хр╕▓', 'р╕нр╕Фр╕Чр╕Щ', 'р╣Гр╕лр╣Йр╕нр╕ар╕▒р╕в', ...];

// р╕нр╕Бр╕╕р╕ир╕е keywords
const unwholesome = ['р╣Вр╕Бр╕гр╕Ш', 'р╣Вр╕ер╕а', 'р╣Вр╕Бр╕З', 'р╕Чр╕│р╕гр╣Йр╕▓р╕в', ...];

// р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╕Ир╕│р╕Щр╕зр╕Щ
if (wholesomeCount > unwholesomeCount) return 'р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б';
else if (unwholesomeCount > wholesomeCount) return 'р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б';
else return 'р╣Ар╕Йр╕вр╣Ж';
```

### р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Др╣Ир╕▓

```typescript
// р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б
if (karmaType === 'р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б') {
  // р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕╕р╕Ур╕Шр╕гр╕гр╕б
  consciousness['Mindfulness'] += 2;
  consciousness['Wisdom'] += 1;

  // р╕ер╕Фр╕Бр╕┤р╣Ар╕ер╕к
  defilement[strongestDefilement] -= 2;
}

// р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б
else if (karmaType === 'р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б') {
  // р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕┤р╣Ар╕ер╕к (р╕Хр╕▓р╕бр╕Ыр╕гр╕░р╣Ар╕ар╕Ч)
  if (text.includes('р╣Вр╕Бр╕гр╕Ш')) defilement['Anger'] += 2;
  if (text.includes('р╣Вр╕ер╕а')) defilement['Lobha'] += 2;

  // р╕ер╕Фр╕Др╕╕р╕Ур╕Шр╕гр╕гр╕б
  consciousness['Mindfulness'] -= 2;
  consciousness['Wisdom'] -= 1;
}
```

### Validation Rules

```typescript
// 1. р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Др╕бр╣Ир╕гр╕╕р╕Щр╣Бр╕гр╕Зр╣Ар╕Бр╕┤р╕Щр╣Др╕Ы
if (Math.abs(change) > 20) {
  warnings.push('р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕гр╕╕р╕Щр╣Бр╕гр╕Зр╣Ар╕Бр╕┤р╕Щр╣Др╕Ы');
}

// 2. р╕бр╕╡р╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Чр╕╡р╣Ир╣Ар╕лр╣Зр╕Щр╕Кр╕▒р╕Ф
if (Math.abs(totalChange) < 5 && sceneCount > 5) {
  warnings.push('р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕бр╕╡р╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Щр╣Йр╕нр╕вр╣Ар╕Бр╕┤р╕Щр╣Др╕Ы');
}

// 3. р╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕Зр╕Бр╕▒р╕Ър╕лр╕ер╕▒р╕Бр╕Бр╕гр╕гр╕б
if (wholesomeScenes > unwholesomeScenes && totalChange < 0) {
  warnings.push('р╕Вр╕▒р╕Фр╕лр╕ер╕▒р╕Бр╕Бр╕гр╕гр╕б: р╕Чр╕│р╕Фр╕╡р╣Бр╕Хр╣Ир╣Гр╕Ир╣Бр╕вр╣Ир╕ер╕З');
}
```

---

## ЁЯУК р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### Example 1: р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Вр╕╢р╣Йр╕Щ

```
**р╕Юр╕гр╕░р╕нр╕гр╕╕р╕У**: р╕Бр╕╕р╕ир╕ер╕Вр╕╢р╣Йр╕Щ (+28.5 р╕Др╕░р╣Бр╕Щр╕Щ)

р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╣Др╕Ыр╣Гр╕Щр╕Чр╕▓р╕Зр╕Чр╕╡р╣Ир╕Фр╕╡р╕Вр╕╢р╣Йр╕Щ р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕Хр╕┤р╕Ыр╕▒р╕Нр╕Нр╕▓ р╕ер╕Фр╕Бр╕┤р╣Ар╕ер╕к

р╕Хр╕ер╕нр╕Фр╣Ар╕гр╕╖р╣Ир╕нр╕З: р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б 9 р╕Др╕гр╕▒р╣Йр╕З, р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б 1 р╕Др╕гр╕▒р╣Йр╕З

р╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б: р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Щр╕╡р╣Йр╣Бр╕кр╕Фр╕Зр╣Гр╕лр╣Йр╣Ар╕лр╣Зр╕Щр╕Цр╕╢р╕Зр╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Ир╕┤р╕Хр╣Гр╕И
р╕Ьр╣Ир╕▓р╕Щр╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│р╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (р╕кр╕▒р╕бр╕бр╕▓р╕Бр╕▒р╕бр╕бр╕▒р╕Щр╕Хр╕░) р╣Бр╕ер╕░р╕Бр╕▓р╕гр╣Ар╕Ир╕гр╕┤р╕Нр╕кр╕Хр╕┤р╕Ыр╕▒р╕Нр╕Нр╕▓
```

### Example 2: р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╣Ар╕кр╕╖р╣Ир╕нр╕бр╕ер╕З

```
**р╕Щр╕▓р╕вр╕Чр╕╕р╕Ир╕гр╕┤р╕Х**: р╕Бр╕╕р╕ир╕ер╕ер╕З (-35.2 р╕Др╕░р╣Бр╕Щр╕Щ)

р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Хр╕Бр╕Хр╣Ир╕│р╕ер╕З р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕┤р╣Ар╕ер╕к р╕ер╕Фр╕кр╕Хр╕┤р╕Ыр╕▒р╕Нр╕Нр╕▓

р╕Хр╕ер╕нр╕Фр╣Ар╕гр╕╖р╣Ир╕нр╕З: р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б 2 р╕Др╕гр╕▒р╣Йр╕З, р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б 11 р╕Др╕гр╕▒р╣Йр╕З

р╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б: р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Щр╕╡р╣Йр╣Бр╕кр╕Фр╕Зр╣Гр╕лр╣Йр╣Ар╕лр╣Зр╕Щр╕Цр╕╢р╕Зр╕Бр╕▓р╕гр╕Хр╕Бр╕Хр╣Ир╕│
р╣Ар╕Юр╕гр╕▓р╕░р╕Цр╕╣р╕Бр╕Др╕гр╕нр╕Ър╕Зр╕│р╕Фр╣Йр╕зр╕вр╕Бр╕┤р╣Ар╕ер╕к (р╕гр╕▓р╕Др╕░ р╣Вр╕Чр╕кр╕░ р╣Вр╕бр╕лр╕░)
р╕Вр╕▓р╕Фр╕кр╕Хр╕┤р╣Бр╕ер╕░р╕Ыр╕▒р╕Нр╕Нр╕▓р╣Гр╕Щр╕Бр╕▓р╕гр╕гр╕╣р╣Йр╣Ар╕Чр╣Ир╕▓р╕Чр╕▒р╕Щ
```

### Example 3: Validation Warning

```
тЪая╕П р╕Юр╕Ър╕Вр╣Йр╕нр╕Др╕зр╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З 2 р╕Ир╕╕р╕Ф

Character: р╕Щр╕▓р╕Зр╕кр╕Зр╕кр╕▒р╕в
- р╕Йр╕▓р╕Б 7: р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕гр╕╕р╕Щр╣Бр╕гр╕Зр╣Ар╕Бр╕┤р╕Щр╣Др╕Ы (-25 р╕Др╕░р╣Бр╕Щр╕Щ)
- р╕Вр╕▒р╕Фр╕лр╕ер╕▒р╕Бр╕Бр╕гр╕гр╕б: р╕Чр╕│р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕бр╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓ р╣Бр╕Хр╣Ир╕Бр╕ер╕▒р╕Ър╕бр╕╡р╕Ир╕┤р╕Хр╣Гр╕Ир╣Бр╕вр╣Ир╕ер╕З

р╣Бр╕Щр╕░р╕Щр╕│:
- р╕Др╕зр╕гр╕Ыр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│р╕лр╕гр╕╖р╕нр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╣Гр╕лр╣Йр╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕Зр╕Бр╕▒р╕Ър╕лр╕ер╕▒р╕Бр╕Бр╕гр╕гр╕б
- р╕Др╕зр╕гр╣Ар╕Юр╕┤р╣Ир╕бр╕Йр╕▓р╕Бр╕Чр╕╡р╣Ир╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Ьр╕ер╕Вр╕нр╕Зр╕Бр╕гр╕гр╕б
```

---

## ЁЯОУ р╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕бр╕Чр╕╡р╣Ир╣Гр╕Кр╣Й

### 1. р╕Бр╕гр╕гр╕б (Karma)

- **р╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б** тЖТ р╕Др╕зр╕▓р╕бр╕кр╕╕р╕В, р╕кр╕Хр╕┤р╕Ыр╕▒р╕Нр╕Нр╕▓р╣Ар╕Юр╕┤р╣Ир╕б, р╕Бр╕┤р╣Ар╕ер╕кр╕ер╕Ф
- **р╕нр╕Бр╕╕р╕ир╕ер╕Бр╕гр╕гр╕б** тЖТ р╕Чр╕╕р╕Бр╕Вр╣М, р╕Бр╕┤р╣Ар╕ер╕кр╣Ар╕Юр╕┤р╣Ир╕б, р╕кр╕Хр╕┤р╕Ыр╕▒р╕Нр╕Нр╕▓р╕ер╕Ф

### 2. р╣Др╕Хр╕гр╕кр╕┤р╕Вр╕Вр╕▓ (Three Trainings)

- **р╕ир╕╡р╕е** (Morality) тЖТ р╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│р╕Чр╕▓р╕Зр╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓р╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- **р╕кр╕бр╕▓р╕Шр╕┤** (Concentration) тЖТ р╕Ир╕┤р╕Хр╕кр╕Зр╕Ъ р╕бр╕╡р╕кр╕Хр╕┤р╕гр╕░р╕ер╕╢р╕Б
- **р╕Ыр╕▒р╕Нр╕Нр╕▓** (Wisdom) тЖТ р╕гр╕╣р╣Йр╣Ар╕Чр╣Ир╕▓р╕Чр╕▒р╕Щр╕Др╕зр╕▓р╕бр╕Ир╕гр╕┤р╕З

### 3. р╕Бр╕┤р╣Ар╕ер╕к (Defilements)

- **р╣Вр╕ер╕ар╕░** (Lobha) - р╕Др╕зр╕▓р╕бр╣Вр╕ер╕а, р╕Др╕зр╕▓р╕бр╕нр╕вр╕▓р╕Б
- **р╣Вр╕Чр╕кр╕░** (Dosa) - р╕Др╕зр╕▓р╕бр╣Вр╕Бр╕гр╕Ш, р╕Др╕зр╕▓р╕бр╣Ар╕Бр╕ер╕╡р╕вр╕Ф
- **р╣Вр╕бр╕лр╕░** (Moha) - р╕Др╕зр╕▓р╕бр╕лр╕ер╕З, р╕Др╕зр╕▓р╕бр╣Др╕бр╣Ир╕гр╕╣р╣Й

### 4. р╕Чр╕▓р╕Зр╕кр╕▓р╕вр╕Бр╕ер╕▓р╕З (Middle Path)

- р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Др╕зр╕гр╕кр╕бр╕Фр╕╕р╕е р╣Др╕бр╣Ир╕кр╕╕р╕Фр╣Вр╕Хр╣Ир╕З
- р╕Юр╕▒р╕Тр╕Щр╕▓р╕Др╣Ир╕нр╕вр╣Ар╕Ыр╣Зр╕Щр╕Др╣Ир╕нр╕вр╣Др╕Ы р╕бр╕╡р╕Др╕зр╕▓р╕бр╕Хр╣Ир╕нр╣Ар╕Щр╕╖р╣Ир╕нр╕З

---

## ЁЯЪА р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕кр╕│р╕лр╕гр╕▒р╕Ъ Developer

```typescript
// 1. Initialize timelines р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕гр╕┤р╣Ир╕бр╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г
import { initializeProjectPsychology } from './services/psychologyIntegration';
scriptData = initializeProjectPsychology(scriptData);

// 2. Auto-update р╕лр╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б
import { updatePsychologyAfterScene } from './services/psychologyIntegration';
const scene = await generateScene(...);
scriptData = updatePsychologyAfterScene(scriptData, scene, plotPoint);

// 3. Validate р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Др╕гр╕Ъ
import { validateProjectPsychology } from './services/psychologyIntegration';
const validation = validateProjectPsychology(scriptData);
console.log(validation.overallSummary);

// 4. Show timeline UI
import { PsychologyTimeline } from './components/PsychologyTimeline';
<PsychologyTimeline
  timeline={scriptData.psychologyTimelines[characterId]}
  onClose={() => setShowTimeline(false)}
/>
```

### р╕кр╕│р╕лр╕гр╕▒р╕Ъ User

1. **р╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕г** - р╕Бр╕│р╕лр╕Щр╕Ф consciousness р╣Бр╕ер╕░ defilement
2. **р╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б** - р╕гр╕░р╕Ър╕Ър╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
3. **р╕Фр╕╣ Timeline** - р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "ЁЯУИ р╕Фр╕╣ Psychology Timeline"
4. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Validation** - р╕Фр╕╣ warnings р╣Бр╕ер╕░ recommendations

---

## ЁЯУИ Performance

- **Memory**: ~1KB per scene per character
- **CPU**: р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕ар╕▓р╕вр╣Гр╕Щ ~50ms р╕Хр╣Ир╕нр╕Йр╕▓р╕Б
- **Storage**: р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕Щ `scriptData.psychologyTimelines`
- **Scalability**: р╕гр╕нр╕Зр╕гр╕▒р╕Ъ 10+ р╕Хр╕▒р╕зр╕ер╕░р╕Др╕г, 100+ р╕Йр╕▓р╕Б

---

## ЁЯФо Future Enhancements

1. **AI-Driven Suggestions**
   - AI р╣Бр╕Щр╕░р╕Щр╕│р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В arc
   - Suggest scenes to improve development

2. **Comparative Analysis**
   - р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ъ arc р╕Вр╕нр╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕лр╕ер╕▓р╕вр╕Хр╕▒р╕з
   - р╣Бр╕кр╕Фр╕Зр╕Др╕зр╕▓р╕бр╕кр╕▒р╕бр╕Юр╕▒р╕Щр╕Шр╣Мр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕г

3. **Export Timeline**
   - Export р╣Ар╕Ыр╣Зр╕Щ PDF/Image
   - Include in production package

4. **Real-time Prediction**
   - р╕Чр╕│р╕Щр╕▓р╕вр╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ър╕Бр╣Ир╕нр╕Щр╕кр╕гр╣Йр╕▓р╕Зр╕Йр╕▓р╕Б
   - р╣Бр╕Щр╕░р╕Щр╕│ karma type р╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б

---

## тЬЕ р╕кр╕гр╕╕р╕Ы

### р╕Др╕зр╕▓р╕бр╕кр╕│р╣Ар╕гр╣Зр╕И

тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ър╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕▓р╕Зр╕Ир╕┤р╕Хр╣Гр╕Ир╕нр╕вр╣Ир╕▓р╕Зр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М
тЬЕ р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Бр╕▓р╕в-р╕зр╕▓р╕Ир╕▓-р╣Гр╕И р╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Юр╕╕р╕Чр╕Ш
тЬЕ р╕Ир╕│р╣Бр╕Щр╕Бр╕Бр╕гр╕гр╕бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
тЬЕ р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х psychology р╕лр╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Хр╣Ир╕ер╕░р╕Йр╕▓р╕Б
тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б
тЬЕ UI р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Бр╕гр╕▓р╕Яр╣Бр╕ер╕░р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
тЬЕ Documentation р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ

### р╕Др╕╕р╕Ур╕Др╣Ир╕▓

- **р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕бр╕╡р╕Др╕зр╕▓р╕бр╕ер╕╢р╕Б**: р╕бр╕╡р╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Чр╕╡р╣Ир╕кр╕бр╣Ар╕лр╕Хр╕╕р╕кр╕бр╕Ьр╕е
- **р╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕Зр╕лр╕ер╕▒р╕Бр╕Шр╕гр╕гр╕б**: р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╕Бр╕гр╕гр╕б
- **р╕Кр╣Ир╕зр╕вр╕Щр╕▒р╕Бр╣Ар╕Вр╕╡р╕вр╕Щ**: р╣Ар╕лр╣Зр╕Щр╕ар╕▓р╕Юр╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ
- **Automatic**: р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╣Ар╕нр╕З р╕гр╕░р╕Ър╕Ър╕Чр╕│р╣Гр╕лр╣Й

### р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

тЬЕ Build р╕кр╕│р╣Ар╕гр╣Зр╕И
тЬЕ р╣Др╕бр╣Ир╕бр╕╡ error
тЬЕ р╣Др╕Яр╕ер╣Мр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ
тЬЕ Documentation р╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М

---

**р╕Ьр╕╣р╣Йр╕Юр╕▒р╕Тр╕Щр╕▓**: GitHub Copilot  
**р╕зр╕▒р╕Щр╕Чр╕╡р╣И**: 5 р╕Шр╕▒р╕Щр╕зр╕▓р╕Др╕б 2568  
**Version**: 1.0.0  
**Status**: тЬЕ Production Ready
